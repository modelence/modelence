"use strict";(self.webpackChunkmodelence_docs=self.webpackChunkmodelence_docs||[]).push([[277],{5335:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"quick-start/tutorial-basics/create-a-store","title":"Using a Store","description":"Stores in Modelence are MongoDB collections with built-in TypeScript support, schema and helper methods. They help you to:","source":"@site/content/quick-start/tutorial-basics/create-a-store.md","sourceDirName":"quick-start/tutorial-basics","slug":"/quick-start/tutorial-basics/create-a-store","permalink":"/quick-start/tutorial-basics/create-a-store","draft":false,"unlisted":false,"editUrl":"https://github.com/modelence/modelence/tree/main/docs/content/quick-start/tutorial-basics/create-a-store.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"quickStartSidebar","previous":{"title":"Tutorial - Todo App","permalink":"/category/tutorial---todo-app"},"next":{"title":"Create a Module","permalink":"/quick-start/tutorial-basics/create-a-module"}}');var r=n(4848),s=n(8453);const i={sidebar_position:1},a="Using a Store",d={},c=[{value:"Create a Store",id:"create-a-store",level:2},{value:"Using the Store",id:"using-the-store",level:2},{value:"Working with Documents",id:"working-with-documents",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"using-a-store",children:"Using a Store"})}),"\n",(0,r.jsx)(t.p,{children:"Stores in Modelence are MongoDB collections with built-in TypeScript support, schema and helper methods. They help you to:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Define ",(0,r.jsx)(t.strong,{children:"type-safe schemas"})," for your data"]}),"\n",(0,r.jsxs)(t.li,{children:["Handle ",(0,r.jsx)(t.strong,{children:"CRUD operations"})," with MongoDB"]}),"\n",(0,r.jsxs)(t.li,{children:["Add ",(0,r.jsx)(t.strong,{children:"custom methods"})," to your documents"]}),"\n",(0,r.jsxs)(t.li,{children:["Configure ",(0,r.jsx)(t.strong,{children:"indexes"})," for better performance"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"create-a-store",children:"Create a Store"}),"\n",(0,r.jsxs)(t.p,{children:["You can define a store anywhere in your project, as long as it is imported and passed into a Module (we will cover Modules in the next tutorial). While you can define everything in a single file, the recommended approach in Modelence is to group code by modules / domains into separate directories. For our Todo app, we'll just put everything into a single ",(0,r.jsx)(t.code,{children:"todo"})," directory on the server side. Create an ",(0,r.jsx)(t.code,{children:"src/server/todo"})," directory and add a ",(0,r.jsx)(t.code,{children:"db.ts"})," file to it which we'll use to define our store for todo items:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",metastring:'title="src/server/todo/db.ts"',children:"import { Store, schema } from 'modelence';\n\nexport const dbTodos = new Store('todos', {\n  // Define the schema for your documents. Modelence schema is based on and closely resembles Zod types.\n  schema: {\n    title: schema.string(),\n    isCompleted: schema.boolean(), \n    dueDate: schema.date().optional(),\n    userId: schema.userId(), // Built-in Modelence type for user references\n    createdAt: schema.date(),\n  },\n\n  // Configure MongoDB indexes\n  indexes: [\n    { key: { userId: 1 } },\n    { key: { dueDate: 1 } },\n  ],\n\n  // Add custom methods to documents\n  methods: {\n    isOverdue() {\n      return this.dueDate < new Date();\n    }\n  }\n});\n"})}),"\n",(0,r.jsx)(t.h2,{id:"using-the-store",children:"Using the Store"}),"\n",(0,r.jsx)(t.p,{children:"Once defined, you can use your Store object to perform any operations on your collection.\nFor example:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"const { insertedId } = await dbTodos.insertOne({\n  title: 'Buy groceries', \n  isCompleted: false, \n  dueDate: new Date('2023-01-31'),\n  userId: '123',\n  createdAt: new Date()\n});\n\nconst todo = await dbTodos.findById(insertedId);\n\nconsole.log(todo.isOverdue());\n"})}),"\n",(0,r.jsx)(t.h2,{id:"working-with-documents",children:"Working with Documents"}),"\n",(0,r.jsx)(t.p,{children:"Stores provide a comprehensive set of methods for working with MongoDB documents, including finding, inserting, updating, and deleting records. All methods are fully typed with TypeScript."}),"\n",(0,r.jsxs)(t.p,{children:["See the ",(0,r.jsx)(t.a,{href:"../../api-reference/store",children:"Store API Reference"})," for a complete list of available methods and their usage."]}),"\n",(0,r.jsx)(t.admonition,{type:"tip",children:(0,r.jsxs)(t.p,{children:["Stores automatically handle MongoDB connection management, collection provisioning and index creation (as you define in the ",(0,r.jsx)(t.code,{children:"indexes"})," array). Just define your Store and start using it - Modelence takes care of the rest."]})})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var o=n(6540);const r={},s=o.createContext(r);function i(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);