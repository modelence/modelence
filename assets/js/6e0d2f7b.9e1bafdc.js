"use strict";(self.webpackChunkmodelence_docs=self.webpackChunkmodelence_docs||[]).push([[2791],{7872:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>h,contentTitle:()=>o,default:()=>j,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"api-reference/store","title":"Store","description":"The Store class provides a type-safe interface for MongoDB collections with built-in schema validation and helper methods.","source":"@site/docs/api-reference/store.md","sourceDirName":"api-reference","slug":"/api-reference/store","permalink":"/modelence/docs/api-reference/store","draft":false,"unlisted":false,"editUrl":"https://github.com/modelence/modelence/tree/main/docs/docs/api-reference/store.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"apiSidebar","previous":{"title":"Overview","permalink":"/modelence/docs/api-reference/intro"},"next":{"title":"React Hooks","permalink":"/modelence/docs/category/react-hooks"}}');var d=r(4848),i=r(8453);function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"../../../README.md",children:(0,d.jsx)(n.strong,{children:"modelence"})})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"../../../README.md",children:"modelence"})," / ",(0,d.jsx)(n.a,{href:"../README.md",children:"data/store"})," / Store"]}),"\n",(0,d.jsx)(n.h1,{id:"class-storetschema-tmethods",children:"Class: Store<TSchema, TMethods>"}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L48",children:"data/store.ts:48"})]}),"\n",(0,d.jsx)(n.p,{children:"The Store class provides a type-safe interface for MongoDB collections with built-in schema validation and helper methods."}),"\n",(0,d.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"const dbTodos = new Store('todos', {\n  schema: {\n    title: schema.string(),\n    completed: schema.boolean(),\n    dueDate: schema.date().optional(),\n    userId: schema.userId(),\n  },\n  methods: {\n    isOverdue() {\n      return this.dueDate < new Date();\n    }\n  }\n});\n"})}),"\n",(0,d.jsx)(n.h2,{id:"type-parameters",children:"Type Parameters"}),"\n",(0,d.jsxs)(n.p,{children:["\u2022 ",(0,d.jsx)(n.strong,{children:"TSchema"})," ",(0,d.jsx)(n.em,{children:"extends"})," ",(0,d.jsx)(n.code,{children:"ModelSchema"})]}),"\n",(0,d.jsx)(n.p,{children:"The document schema type"}),"\n",(0,d.jsxs)(n.p,{children:["\u2022 ",(0,d.jsx)(n.strong,{children:"TMethods"})," ",(0,d.jsx)(n.em,{children:"extends"})," ",(0,d.jsx)(n.code,{children:"Record"}),"<",(0,d.jsx)(n.code,{children:"string"}),", (",(0,d.jsx)(n.code,{children:"this"}),", ...",(0,d.jsx)(n.code,{children:"args"}),") => ",(0,d.jsx)(n.code,{children:"any"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"Custom methods that will be added to documents"}),"\n",(0,d.jsx)(n.h2,{id:"constructors",children:"Constructors"}),"\n",(0,d.jsx)(n.h3,{id:"new-store",children:"new Store()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"new Store<TSchema, TMethods>(name, options): Store<TSchema, TMethods>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L73",children:"data/store.ts:73"})]}),"\n",(0,d.jsx)(n.p,{children:"Creates a new Store instance"}),"\n",(0,d.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"name",children:"name"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"string"})}),"\n",(0,d.jsx)(n.p,{children:"The collection name in MongoDB"}),"\n",(0,d.jsx)(n.h5,{id:"options",children:"options"}),"\n",(0,d.jsx)(n.p,{children:"Store configuration"}),"\n",(0,d.jsx)(n.h6,{id:"indexes",children:"indexes"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"IndexDescription"}),"[]"]}),"\n",(0,d.jsx)(n.p,{children:"MongoDB indexes to create"}),"\n",(0,d.jsx)(n.h6,{id:"methods",children:"methods"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"TMethods"})}),"\n",(0,d.jsx)(n.p,{children:"Custom methods to add to documents"}),"\n",(0,d.jsx)(n.h6,{id:"schema",children:"schema"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"TSchema"})}),"\n",(0,d.jsx)(n.p,{children:"Document schema using Modelence schema types"}),"\n",(0,d.jsx)(n.h4,{id:"returns",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"Store.md",children:(0,d.jsx)(n.code,{children:"Store"})}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),", ",(0,d.jsx)(n.code,{children:"TMethods"}),">"]}),"\n",(0,d.jsx)(n.h2,{id:"methods-1",children:"Methods"}),"\n",(0,d.jsx)(n.h3,{id:"aggregate",children:"aggregate()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"aggregate(pipeline, options?): AggregationCursor<Document>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L297",children:"data/store.ts:297"})]}),"\n",(0,d.jsx)(n.p,{children:"Aggregates documents using MongoDB's aggregation framework"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"pipeline",children:"pipeline"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Document"}),"[]"]}),"\n",(0,d.jsx)(n.p,{children:"The aggregation pipeline"}),"\n",(0,d.jsx)(n.h5,{id:"options-1",children:"options?"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"AggregateOptions"})}),"\n",(0,d.jsx)(n.p,{children:"Optional options"}),"\n",(0,d.jsx)(n.h4,{id:"returns-1",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"AggregationCursor"}),"<",(0,d.jsx)(n.code,{children:"Document"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"The aggregation cursor"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"bulkwrite",children:"bulkWrite()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"bulkWrite(operations): Promise<BulkWriteResult>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L307",children:"data/store.ts:307"})]}),"\n",(0,d.jsx)(n.p,{children:"Performs a bulk write operation on the collection"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"operations",children:"operations"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"AnyBulkWriteOperation"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>[]"]}),"\n",(0,d.jsx)(n.p,{children:"The operations to perform"}),"\n",(0,d.jsx)(n.h4,{id:"returns-2",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"BulkWriteResult"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"The result of the bulk write operation"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"deletemany",children:"deleteMany()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"deleteMany(selector): Promise<DeleteResult>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L286",children:"data/store.ts:286"})]}),"\n",(0,d.jsx)(n.p,{children:"Deletes multiple documents"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"selector",children:"selector"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Filter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The selector to find the documents to delete"}),"\n",(0,d.jsx)(n.h4,{id:"returns-3",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"DeleteResult"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"The result of the delete operation"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"deleteone",children:"deleteOne()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"deleteOne(selector): Promise<DeleteResult>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L276",children:"data/store.ts:276"})]}),"\n",(0,d.jsx)(n.p,{children:"Deletes a single document"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-4",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"selector-1",children:"selector"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Filter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The selector to find the document to delete"}),"\n",(0,d.jsx)(n.h4,{id:"returns-4",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"DeleteResult"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"The result of the delete operation"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"fetch",children:"fetch()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'fetch(query, options?): Promise<EnhancedOmit<InferDocumentType<TSchema>, "_id"> & object & TMethods & Record<string, never>[]>\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L198",children:"data/store.ts:198"})]}),"\n",(0,d.jsxs)(n.p,{children:["Fetches multiple documents, equivalent to Node.js MongoDB driver's ",(0,d.jsx)(n.code,{children:"find"})," and ",(0,d.jsx)(n.code,{children:"toArray"})," methods combined."]}),"\n",(0,d.jsx)(n.h4,{id:"parameters-5",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"query",children:"query"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Filter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The query to filter documents"}),"\n",(0,d.jsx)(n.h5,{id:"options-2",children:"options?"}),"\n",(0,d.jsx)(n.p,{children:"Optional options"}),"\n",(0,d.jsx)(n.h6,{id:"sort",children:"sort"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"Document"})}),"\n",(0,d.jsx)(n.h4,{id:"returns-5",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"EnhancedOmit"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">, ",(0,d.jsx)(n.code,{children:'"_id"'}),"> & ",(0,d.jsx)(n.code,{children:"object"})," & ",(0,d.jsx)(n.code,{children:"TMethods"})," & ",(0,d.jsx)(n.code,{children:"Record"}),"<",(0,d.jsx)(n.code,{children:"string"}),", ",(0,d.jsx)(n.code,{children:"never"}),">[]>"]}),"\n",(0,d.jsx)(n.p,{children:"The documents"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"findbyid",children:"findById()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'findById(id): Promise<\n  | null\n| EnhancedOmit<InferDocumentType<TSchema>, "_id"> & object & TMethods & Record<string, never>>\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L171",children:"data/store.ts:171"})]}),"\n",(0,d.jsx)(n.p,{children:"Fetches a single document by its ID"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-6",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"id",children:"id"}),"\n",(0,d.jsx)(n.p,{children:"The ID of the document to find"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"string"})," | ",(0,d.jsx)(n.code,{children:"ObjectId"})]}),"\n",(0,d.jsx)(n.h4,{id:"returns-6",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<\n| ",(0,d.jsx)(n.code,{children:"null"}),"\n| ",(0,d.jsx)(n.code,{children:"EnhancedOmit"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">, ",(0,d.jsx)(n.code,{children:'"_id"'}),"> & ",(0,d.jsx)(n.code,{children:"object"})," & ",(0,d.jsx)(n.code,{children:"TMethods"})," & ",(0,d.jsx)(n.code,{children:"Record"}),"<",(0,d.jsx)(n.code,{children:"string"}),", ",(0,d.jsx)(n.code,{children:"never"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The document, or null if not found"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"findone",children:"findOne()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'findOne(query, options?): Promise<\n  | null\n| EnhancedOmit<InferDocumentType<TSchema>, "_id"> & object & TMethods & Record<string, never>>\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L136",children:"data/store.ts:136"})]}),"\n",(0,d.jsx)(n.h4,{id:"parameters-7",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"query-1",children:"query"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Filter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.h5,{id:"options-3",children:"options?"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"FindOptions"})}),"\n",(0,d.jsx)(n.h4,{id:"returns-7",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<\n| ",(0,d.jsx)(n.code,{children:"null"}),"\n| ",(0,d.jsx)(n.code,{children:"EnhancedOmit"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">, ",(0,d.jsx)(n.code,{children:'"_id"'}),"> & ",(0,d.jsx)(n.code,{children:"object"})," & ",(0,d.jsx)(n.code,{children:"TMethods"})," & ",(0,d.jsx)(n.code,{children:"Record"}),"<",(0,d.jsx)(n.code,{children:"string"}),", ",(0,d.jsx)(n.code,{children:"never"}),">>"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"getname",children:"getName()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"getName(): string\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L90",children:"data/store.ts:90"})]}),"\n",(0,d.jsx)(n.h4,{id:"returns-8",children:"Returns"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"string"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"insertmany",children:"insertMany()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"insertMany(documents): Promise<InsertManyResult>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L219",children:"data/store.ts:219"})]}),"\n",(0,d.jsx)(n.p,{children:"Inserts multiple documents"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-8",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"documents",children:"documents"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"OptionalUnlessRequiredId"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>[]"]}),"\n",(0,d.jsx)(n.p,{children:"The documents to insert"}),"\n",(0,d.jsx)(n.h4,{id:"returns-9",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"InsertManyResult"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"The result of the insert operation"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"insertone",children:"insertOne()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"insertOne(document): Promise<InsertOneResult>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L209",children:"data/store.ts:209"})]}),"\n",(0,d.jsx)(n.p,{children:"Inserts a single document"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-9",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"document",children:"document"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"OptionalUnlessRequiredId"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The document to insert"}),"\n",(0,d.jsx)(n.h4,{id:"returns-10",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"InsertOneResult"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"The result of the insert operation"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"requirebyid",children:"requireById()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'requireById(id, errorHandler?): Promise<EnhancedOmit<InferDocumentType<TSchema>, "_id"> & object & TMethods & Record<string, never>>\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L183",children:"data/store.ts:183"})]}),"\n",(0,d.jsx)(n.p,{children:"Fetches a single document by its ID, or throws an error if not found"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-10",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"id-1",children:"id"}),"\n",(0,d.jsx)(n.p,{children:"The ID of the document to find"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"string"})," | ",(0,d.jsx)(n.code,{children:"ObjectId"})]}),"\n",(0,d.jsx)(n.h5,{id:"errorhandler",children:"errorHandler?"}),"\n",(0,d.jsxs)(n.p,{children:["() => ",(0,d.jsx)(n.code,{children:"Error"})]}),"\n",(0,d.jsx)(n.p,{children:"Optional error handler to return a custom error if the document is not found"}),"\n",(0,d.jsx)(n.h4,{id:"returns-11",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"EnhancedOmit"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">, ",(0,d.jsx)(n.code,{children:'"_id"'}),"> & ",(0,d.jsx)(n.code,{children:"object"})," & ",(0,d.jsx)(n.code,{children:"TMethods"})," & ",(0,d.jsx)(n.code,{children:"Record"}),"<",(0,d.jsx)(n.code,{children:"string"}),", ",(0,d.jsx)(n.code,{children:"never"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The document"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"requireone",children:"requireOne()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'requireOne(\n   query, \n   options?, \nerrorHandler?): Promise<EnhancedOmit<InferDocumentType<TSchema>, "_id"> & object & TMethods & Record<string, never>>\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L144",children:"data/store.ts:144"})]}),"\n",(0,d.jsx)(n.h4,{id:"parameters-11",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"query-2",children:"query"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Filter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.h5,{id:"options-4",children:"options?"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"FindOptions"})}),"\n",(0,d.jsx)(n.h5,{id:"errorhandler-1",children:"errorHandler?"}),"\n",(0,d.jsxs)(n.p,{children:["() => ",(0,d.jsx)(n.code,{children:"Error"})]}),"\n",(0,d.jsx)(n.h4,{id:"returns-12",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"EnhancedOmit"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">, ",(0,d.jsx)(n.code,{children:'"_id"'}),"> & ",(0,d.jsx)(n.code,{children:"object"})," & ",(0,d.jsx)(n.code,{children:"TMethods"})," & ",(0,d.jsx)(n.code,{children:"Record"}),"<",(0,d.jsx)(n.code,{children:"string"}),", ",(0,d.jsx)(n.code,{children:"never"}),">>"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"updatemany",children:"updateMany()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"updateMany(selector, update): Promise<UpdateResult>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L255",children:"data/store.ts:255"})]}),"\n",(0,d.jsx)(n.p,{children:"Updates multiple documents"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-12",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"selector-2",children:"selector"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Filter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The selector to find the documents to update"}),"\n",(0,d.jsx)(n.h5,{id:"update",children:"update"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"UpdateFilter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The MongoDB modifier to apply to the documents"}),"\n",(0,d.jsx)(n.h4,{id:"returns-13",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"UpdateResult"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"The result of the update operation"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"updateone",children:"updateOne()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"updateOne(selector, update): Promise<UpdateResult>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L230",children:"data/store.ts:230"})]}),"\n",(0,d.jsx)(n.p,{children:"Updates a single document"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-13",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"selector-3",children:"selector"}),"\n",(0,d.jsx)(n.p,{children:"The selector to find the document to update"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"string"})," | ",(0,d.jsx)(n.code,{children:"Filter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.h5,{id:"update-1",children:"update"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"UpdateFilter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The update to apply to the document"}),"\n",(0,d.jsx)(n.h4,{id:"returns-14",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"UpdateResult"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"The result of the update operation"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"upsertmany",children:"upsertMany()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"upsertMany(selector, update): Promise<UpdateResult>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L266",children:"data/store.ts:266"})]}),"\n",(0,d.jsx)(n.p,{children:"Updates multiple documents, or inserts them if they don't exist"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-14",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"selector-4",children:"selector"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Filter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The selector to find the documents to update"}),"\n",(0,d.jsx)(n.h5,{id:"update-2",children:"update"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"UpdateFilter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The MongoDB modifier to apply to the documents"}),"\n",(0,d.jsx)(n.h4,{id:"returns-15",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"UpdateResult"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"The result of the update operation"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"upsertone",children:"upsertOne()"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"upsertOne(selector, update): Promise<UpdateResult>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L244",children:"data/store.ts:244"})]}),"\n",(0,d.jsx)(n.p,{children:"Updates a single document, or inserts it if it doesn't exist"}),"\n",(0,d.jsx)(n.h4,{id:"parameters-15",children:"Parameters"}),"\n",(0,d.jsx)(n.h5,{id:"selector-5",children:"selector"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Filter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The selector to find the document to update"}),"\n",(0,d.jsx)(n.h5,{id:"update-3",children:"update"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"UpdateFilter"}),"<",(0,d.jsx)(n.code,{children:"InferDocumentType"}),"<",(0,d.jsx)(n.code,{children:"TSchema"}),">>"]}),"\n",(0,d.jsx)(n.p,{children:"The MongoDB modifier to apply to the document"}),"\n",(0,d.jsx)(n.h4,{id:"returns-16",children:"Returns"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"Promise"}),"<",(0,d.jsx)(n.code,{children:"UpdateResult"}),">"]}),"\n",(0,d.jsx)(n.p,{children:"The result of the update operation"}),"\n",(0,d.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,d.jsx)(n.h3,{id:"doc",children:"Doc"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:'readonly Doc: EnhancedOmit<InferDocumentType<TSchema>, "_id"> & object & TMethods & Record<string, never>;\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Defined in: ",(0,d.jsx)(n.a,{href:"https://github.com/modelence/modelence/blob/main/data/store.ts#L59",children:"data/store.ts:59"})]}),"\n",(0,d.jsx)(n.h4,{id:"type-declaration",children:"Type declaration"}),"\n",(0,d.jsx)(n.h5,{id:"_id",children:"_id"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-ts",children:"_id: InferIdType<InferDocumentType<TSchema>>;\n"})})]})}function t(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}const c={sidebar_position:4},o="Store",h={},a=[{value:"API Reference",id:"api-reference",level:2},{value:"Example",id:"example",level:2},{value:"Type Parameters",id:"type-parameters",level:2},{value:"Constructors",id:"constructors",level:2},{value:"new Store()",id:"new-store",level:3},{value:"Parameters",id:"parameters",level:4},{value:"name",id:"name",level:5},{value:"options",id:"options",level:5},{value:"indexes",id:"indexes",level:6},{value:"methods",id:"methods",level:6},{value:"schema",id:"schema",level:6},{value:"Returns",id:"returns",level:4},{value:"Methods",id:"methods-1",level:2},{value:"aggregate()",id:"aggregate",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"pipeline",id:"pipeline",level:5},{value:"options?",id:"options-1",level:5},{value:"Returns",id:"returns-1",level:4},{value:"bulkWrite()",id:"bulkwrite",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"operations",id:"operations",level:5},{value:"Returns",id:"returns-2",level:4},{value:"deleteMany()",id:"deletemany",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"selector",id:"selector",level:5},{value:"Returns",id:"returns-3",level:4},{value:"deleteOne()",id:"deleteone",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"selector",id:"selector-1",level:5},{value:"Returns",id:"returns-4",level:4},{value:"fetch()",id:"fetch",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"query",id:"query",level:5},{value:"options?",id:"options-2",level:5},{value:"sort",id:"sort",level:6},{value:"Returns",id:"returns-5",level:4},{value:"findById()",id:"findbyid",level:3},{value:"Parameters",id:"parameters-6",level:4},{value:"id",id:"id",level:5},{value:"Returns",id:"returns-6",level:4},{value:"findOne()",id:"findone",level:3},{value:"Parameters",id:"parameters-7",level:4},{value:"query",id:"query-1",level:5},{value:"options?",id:"options-3",level:5},{value:"Returns",id:"returns-7",level:4},{value:"getName()",id:"getname",level:3},{value:"Returns",id:"returns-8",level:4},{value:"insertMany()",id:"insertmany",level:3},{value:"Parameters",id:"parameters-8",level:4},{value:"documents",id:"documents",level:5},{value:"Returns",id:"returns-9",level:4},{value:"insertOne()",id:"insertone",level:3},{value:"Parameters",id:"parameters-9",level:4},{value:"document",id:"document",level:5},{value:"Returns",id:"returns-10",level:4},{value:"requireById()",id:"requirebyid",level:3},{value:"Parameters",id:"parameters-10",level:4},{value:"id",id:"id-1",level:5},{value:"errorHandler?",id:"errorhandler",level:5},{value:"Returns",id:"returns-11",level:4},{value:"requireOne()",id:"requireone",level:3},{value:"Parameters",id:"parameters-11",level:4},{value:"query",id:"query-2",level:5},{value:"options?",id:"options-4",level:5},{value:"errorHandler?",id:"errorhandler-1",level:5},{value:"Returns",id:"returns-12",level:4},{value:"updateMany()",id:"updatemany",level:3},{value:"Parameters",id:"parameters-12",level:4},{value:"selector",id:"selector-2",level:5},{value:"update",id:"update",level:5},{value:"Returns",id:"returns-13",level:4},{value:"updateOne()",id:"updateone",level:3},{value:"Parameters",id:"parameters-13",level:4},{value:"selector",id:"selector-3",level:5},{value:"update",id:"update-1",level:5},{value:"Returns",id:"returns-14",level:4},{value:"upsertMany()",id:"upsertmany",level:3},{value:"Parameters",id:"parameters-14",level:4},{value:"selector",id:"selector-4",level:5},{value:"update",id:"update-2",level:5},{value:"Returns",id:"returns-15",level:4},{value:"upsertOne()",id:"upsertone",level:3},{value:"Parameters",id:"parameters-15",level:4},{value:"selector",id:"selector-5",level:5},{value:"update",id:"update-3",level:5},{value:"Returns",id:"returns-16",level:4},{value:"Properties",id:"properties",level:2},{value:"Doc",id:"doc",level:3},{value:"Type declaration",id:"type-declaration",level:4},{value:"_id",id:"_id",level:5}];function x(e){const n={h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"store",children:"Store"})}),"\n",(0,d.jsx)(n.p,{children:"The Store class provides a type-safe interface for MongoDB collections with built-in schema validation and helper methods."}),"\n",(0,d.jsx)(n.p,{children:"Stores allow you to:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Define type-safe schemas for your data"}),"\n",(0,d.jsx)(n.li,{children:"Handle CRUD operations with MongoDB"}),"\n",(0,d.jsx)(n.li,{children:"Add custom methods to your documents"}),"\n",(0,d.jsx)(n.li,{children:"Configure MongoDB indexes"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n","\n",(0,d.jsx)(t,{})]})}function j(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(x,{...e})}):x(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>t});var s=r(6540);const d={},i=s.createContext(d);function l(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);